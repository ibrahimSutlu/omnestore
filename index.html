<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OmniStore ‚Äî Modern E-Ticaret</title>
  <meta name="description" content="OmniStore ‚Äî modern e-ticaret deneyimi. Hƒ±zlƒ± teslimat, g√ºvenli √∂deme, kolay iade." />

  <style>
    :root{
      --bg: #0b1020;
      --bg2:#0a0f1f;
      --card:#0f1732;
      --card2:#0d1530;
      --text:#e7eaf3;
      --muted:#aab2c5;
      --border:rgba(255,255,255,.08);
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --accent:#7c3aed;      /* violet */
      --accent2:#22c55e;     /* green */
      --warn:#f59e0b;        /* amber */
      --danger:#ef4444;      /* red */
      --radius: 18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(900px 500px at 10% -10%, rgba(124,58,237,.35), transparent 60%),
        radial-gradient(700px 500px at 90% 0%, rgba(34,197,94,.22), transparent 55%),
        radial-gradient(900px 600px at 50% 120%, rgba(59,130,246,.18), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      color:var(--text);
    }

    a{color:inherit;text-decoration:none}
    button,input{font:inherit}

    .container{max-width:1200px;margin:0 auto;padding:24px}
    .topbar{
      display:flex;align-items:center;justify-content:space-between;
      gap:16px;padding:10px 0 18px;
    }
    .brand{
      display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:-.02em;
      font-size:18px;
    }
    .logo{
      width:40px;height:40px;border-radius:14px;
      background: linear-gradient(135deg, rgba(124,58,237,.95), rgba(34,197,94,.75));
      box-shadow: 0 12px 28px rgba(124,58,237,.22);
      position:relative;
    }
    .logo:after{
      content:"";
      position:absolute;inset:10px;
      border-radius:10px;border:1px solid rgba(255,255,255,.35);
      opacity:.7;
    }

    .nav{
      display:flex;align-items:center;gap:14px;flex-wrap:wrap;
      color:var(--muted);font-size:14px;
    }
    .nav a{padding:8px 10px;border-radius:12px}
    .nav a:hover{background:rgba(255,255,255,.06);color:var(--text)}

    .actions{display:flex;align-items:center;gap:10px}
    .iconbtn{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:14px;
      background:rgba(255,255,255,.06);
      border:1px solid var(--border);
      color:var(--text);
      cursor:pointer;
    }
    .iconbtn:hover{background:rgba(255,255,255,.09)}
    .pill{
      font-size:12px;color:rgba(255,255,255,.85);
      padding:6px 10px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.04);
    }

    /* Announcement */
    .announce{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:12px 14px;border-radius:16px;
      border:1px solid var(--border);
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      box-shadow: 0 12px 40px rgba(0,0,0,.22);
      margin-bottom:18px;
    }
    .announce strong{color:#fff}
    .tag{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border-radius:999px;font-size:12px;
      background:rgba(34,197,94,.15);
      border:1px solid rgba(34,197,94,.25);
      color:#d7ffe8;
      white-space:nowrap;
    }

    /* Hero */
    .hero{
      display:grid;grid-template-columns: 1.15fr .85fr;
      gap:20px;align-items:stretch;
      margin:18px 0 26px;
    }
    .heroCard{
      border-radius: var(--radius);
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      padding:22px;
      overflow:hidden;
      position:relative;
    }
    .heroCard:before{
      content:"";
      position:absolute;inset:-2px;
      background: radial-gradient(600px 260px at 20% 10%, rgba(124,58,237,.35), transparent 60%),
                  radial-gradient(480px 240px at 90% 20%, rgba(34,197,94,.22), transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .heroInner{position:relative}
    .hero h1{
      margin:0 0 8px;
      font-size:44px;line-height:1.05;letter-spacing:-.03em;
    }
    .hero p{
      margin:10px 0 0;
      color:var(--muted);font-size:16px;line-height:1.6;
      max-width: 56ch;
    }
    .heroActions{
      display:flex;gap:10px;flex-wrap:wrap;
      margin-top:16px;
    }
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:12px 14px;border-radius:16px;
      border:1px solid var(--border);
      cursor:pointer;
      font-weight:650;
    }
    .btnPrimary{
      background: linear-gradient(135deg, rgba(124,58,237,.95), rgba(124,58,237,.55));
      border-color: rgba(124,58,237,.45);
      box-shadow: 0 14px 40px rgba(124,58,237,.18);
    }
    .btnPrimary:hover{filter:brightness(1.05)}
    .btnGhost{
      background:rgba(255,255,255,.06);
    }
    .btnGhost:hover{background:rgba(255,255,255,.09)}
    .kpis{
      display:flex;gap:12px;flex-wrap:wrap;margin-top:14px;
      color:rgba(255,255,255,.9);
    }
    .kpi{
      padding:10px 12px;border-radius:16px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.14);
      backdrop-filter: blur(6px);
      min-width:150px;
    }
    .kpi b{display:block;font-size:16px}
    .kpi span{display:block;margin-top:2px;font-size:12px;color:var(--muted)}

    .sideCard{
      border-radius: var(--radius);
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      padding:18px;
      display:flex;flex-direction:column;gap:14px;
    }

    .searchRow{
      display:flex;gap:10px;align-items:center;
    }
    .search{
      flex:1;
      padding:12px 14px;border-radius:16px;
      background:rgba(255,255,255,.06);
      border:1px solid var(--border);
      color:var(--text);
      outline:none;
    }
    .search::placeholder{color:rgba(170,178,197,.75)}
    .select{
      padding:12px 12px;border-radius:16px;
      background:rgba(255,255,255,.06);
      border:1px solid var(--border);
      color:var(--text);
      outline:none;
      min-width:140px;
    }

    .promo{
      border-radius:16px;
      border:1px solid rgba(245,158,11,.25);
      background: linear-gradient(180deg, rgba(245,158,11,.12), rgba(245,158,11,.06));
      padding:14px;
    }
    .promo h4{margin:0 0 6px;font-size:14px}
    .promo p{margin:0;color:rgba(255,255,255,.82);font-size:13px;line-height:1.5}
    .promo .tiny{margin-top:8px;color:rgba(255,255,255,.65);font-size:12px}

    /* Layout main */
    .main{
      display:grid;
      grid-template-columns: 1fr 340px;
      gap:20px;
      align-items:start;
      margin-top: 18px;
    }

    /* Products */
    .sectionTitle{
      display:flex;align-items:flex-end;justify-content:space-between;gap:12px;
      margin: 8px 0 12px;
    }
    .sectionTitle h2{margin:0;font-size:18px}
    .sectionTitle p{margin:0;color:var(--muted);font-size:13px}

    .products{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:14px;
    }

    .product{
      border-radius: 18px;
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      padding:14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.18);
      display:flex;flex-direction:column;gap:10px;
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .product:hover{
      transform: translateY(-3px);
      box-shadow: 0 18px 50px rgba(0,0,0,.28);
    }

    .thumb{
      height:150px;border-radius:16px;
      border:1px solid var(--border);
      background:
        radial-gradient(120px 80px at 30% 30%, rgba(124,58,237,.40), transparent 70%),
        radial-gradient(120px 80px at 70% 60%, rgba(34,197,94,.28), transparent 70%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      position:relative;overflow:hidden;
    }
    .thumb:after{
      content:"";
      position:absolute;inset:0;
      background: linear-gradient(180deg, transparent, rgba(0,0,0,.25));
    }
    .badgeCorner{
      position:absolute;left:10px;top:10px;
      z-index:1;
      font-size:12px;
      padding:6px 10px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.25);
      backdrop-filter: blur(6px);
    }

    .pname{font-weight:750;letter-spacing:-.01em}
    .pdesc{color:var(--muted);font-size:13px;line-height:1.45;min-height:38px}
    .row{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .price{font-weight:800}
    .old{
      color:rgba(170,178,197,.75);
      text-decoration: line-through;
      font-weight:600;
      margin-left:8px;
      font-size:12px;
    }
    .rating{
      display:flex;align-items:center;gap:6px;
      color:rgba(255,255,255,.9);font-size:12px;
    }
    .stars{color:rgba(245,158,11,.95)}
    .add{
      width:100%;
      padding:11px 12px;border-radius:16px;
      border:1px solid rgba(124,58,237,.35);
      background: rgba(124,58,237,.18);
      cursor:pointer;
      font-weight:700;
    }
    .add:hover{background: rgba(124,58,237,.24)}

    /* Sidebar */
    .panel{
      border-radius: var(--radius);
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      padding:16px;
    }
    .panel h3{margin:0 0 10px;font-size:16px}
    .line{
      height:1px;background:rgba(255,255,255,.08);margin:12px 0;
    }
    .chipRow{display:flex;gap:10px;flex-wrap:wrap}
    .chip{
      padding:8px 10px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.05);
      color:rgba(255,255,255,.86);
      font-size:12px;
      cursor:pointer;
      user-select:none;
    }
    .chip.active{
      background: rgba(34,197,94,.18);
      border-color: rgba(34,197,94,.28);
      color:#eafff3;
    }

    .cartItem{
      display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
      padding:10px 0;
    }
    .miniThumb{
      width:44px;height:44px;border-radius:14px;border:1px solid var(--border);
      background: radial-gradient(24px 24px at 30% 30%, rgba(124,58,237,.45), transparent 70%),
                  radial-gradient(24px 24px at 70% 60%, rgba(34,197,94,.30), transparent 70%),
                  rgba(255,255,255,.04);
      flex:0 0 auto;
    }
    .ciMain{flex:1;min-width:0}
    .ciMain b{display:block;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .ciMain span{display:block;margin-top:2px;color:var(--muted);font-size:12px}
    .qty{
      display:flex;align-items:center;gap:8px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.04);
      padding:6px 8px;border-radius:14px;
    }
    .qty button{
      width:26px;height:26px;border-radius:10px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.05);
      color:var(--text);
      cursor:pointer;
    }
    .qty button:hover{background:rgba(255,255,255,.09)}
    .sumRow{display:flex;align-items:center;justify-content:space-between;margin-top:10px;color:rgba(255,255,255,.9)}
    .sumRow span{color:var(--muted)}
    .checkout{
      width:100%;
      margin-top:12px;
      padding:12px 14px;border-radius:16px;
      border:1px solid rgba(34,197,94,.35);
      background: rgba(34,197,94,.18);
      cursor:pointer;
      font-weight:800;
    }
    .checkout:hover{background: rgba(34,197,94,.24)}
    .smallNote{
      margin-top:10px;color:rgba(170,178,197,.78);font-size:12px;line-height:1.45;
    }

    /* Footer */
    .footer{
      margin-top:30px;
      padding:18px 0 0;
      color:rgba(170,178,197,.8);
      font-size:13px;
      display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;
      border-top: 1px solid rgba(255,255,255,.08);
    }

    /* Responsive */
    @media (max-width: 980px){
      .hero{grid-template-columns: 1fr}
      .main{grid-template-columns: 1fr}
      .products{grid-template-columns: repeat(2, minmax(0,1fr))}
    }
    @media (max-width: 560px){
      .products{grid-template-columns: 1fr}
      .hero h1{font-size:36px}
      .nav{display:none}
    }
  </style>
</head>

<body>
  <div class="container">

    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          OmniStore
          <div style="font-weight:600;font-size:12px;color:var(--muted);margin-top:2px;">
            Modern E-Ticaret ‚Ä¢ Hƒ±zlƒ± ‚Ä¢ G√ºvenli ‚Ä¢ Kolay
          </div>
        </div>
      </div>

      <nav class="nav" aria-label="primary">
        <a href="#urunler">√úr√ºnler</a>
        <a href="#kampanya">Kampanya</a>
        <a href="#teslimat">Teslimat</a>
        <a href="#destek">Destek</a>
      </nav>

      <div class="actions">
        <span class="pill">TR ‚Ä¢ ‚Ç∫</span>
        <button class="iconbtn" type="button" aria-label="Hesabƒ±m">
          üë§ <span style="color:var(--muted)">Hesabƒ±m</span>
        </button>
      </div>
    </div>

    <div class="announce" id="kampanya">
      <div>
        <strong>üöÄ Yeni sezon fƒ±rsatlarƒ±</strong> ‚Äî 1000‚Ç∫ √ºzeri sipari≈ülerde <b>√ºcretsiz kargo</b> + se√ßili √ºr√ºnlerde <b>%20</b> indirim.
      </div>
      <span class="tag">‚ö° 24 saatte kargo</span>
    </div>

    <section class="hero" aria-label="Hero">
      <div class="heroCard">
        <div class="heroInner">
          <div class="pill" style="display:inline-flex;gap:8px;align-items:center;">
            ‚úÖ G√ºvenli √∂deme ‚Ä¢ üîÅ Kolay iade ‚Ä¢ üì¶ Hƒ±zlƒ± teslimat
          </div>

          <h1>Alƒ±≈üveri≈üin yeni <span style="color:var(--accent)">standart</span>ƒ±.</h1>
          <p>
            OmniStore ile pop√ºler √ºr√ºnleri ke≈üfet, favorilerini sepete ekle ve tek tƒ±kla satƒ±n al.
            Kampanyalar, hƒ±zlƒ± teslimat ve g√ºvenli √∂deme deneyimi tek yerde.
          </p>

          <div class="heroActions">
            <a class="btn btnPrimary" href="#urunler">üõçÔ∏è √úr√ºnleri ƒ∞ncele</a>
            <a class="btn btnGhost" href="#destek">üí¨ Canlƒ± Destek</a>
          </div>

          <div class="kpis">
            <div class="kpi">
              <b>4.8/5</b>
              <span>M√º≈üteri memnuniyeti</span>
            </div>
            <div class="kpi">
              <b>1‚Äì2 g√ºn</b>
              <span>Teslimat s√ºresi</span>
            </div>
            <div class="kpi">
              <b>14 g√ºn</b>
              <span>Kolay iade</span>
            </div>
          </div>
        </div>
      </div>

      <aside class="sideCard" aria-label="Search & Promo">
        <div class="searchRow">
          <input id="q" class="search" placeholder="√úr√ºn ara (√∂r. kulaklƒ±k, laptop, kahve)..." />
          <select id="cat" class="select" aria-label="Kategori">
            <option value="all">T√ºm√º</option>
            <option value="tech">Teknoloji</option>
            <option value="home">Ev & Ya≈üam</option>
            <option value="fashion">Moda</option>
          </select>
        </div>

        <div class="promo" id="teslimat">
          <h4>üéÅ ƒ∞lk sipari≈üe √∂zel</h4>
          <p><b>WELCOME10</b> koduyla sepette ekstra indirim.</p>
          <div class="tiny">Kampanya sƒ±nƒ±rlƒ± s√ºreyle ge√ßerlidir.</div>
        </div>

        <div class="panel">
          <h3>Hƒ±zlƒ± kategoriler</h3>
          <div class="chipRow" role="list">
            <span class="chip active" data-chip="all" role="listitem">T√ºm√º</span>
            <span class="chip" data-chip="tech" role="listitem">Teknoloji</span>
            <span class="chip" data-chip="home" role="listitem">Ev & Ya≈üam</span>
            <span class="chip" data-chip="fashion" role="listitem">Moda</span>
          </div>

          <div class="line"></div>

          <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;color:var(--muted);font-size:12px">
            <span class="pill">üîí 3D Secure</span>
            <span class="pill">üßæ E-Fatura</span>
            <span class="pill">‚ôªÔ∏è ƒ∞ade garantisi</span>
          </div>
        </div>
      </aside>
    </section>

    <section class="main" id="urunler" aria-label="Main content">
      <div>
        <div class="sectionTitle">
          <div>
            <h2>√ñne √áƒ±kan √úr√ºnler</h2>
            <p>Pop√ºler se√ßimler ‚Ä¢ G√ºncel kampanyalar ‚Ä¢ Hƒ±zlƒ± teslimat</p>
          </div>
          <div class="pill" id="count">8 √ºr√ºn</div>
        </div>

        <div class="products" id="products"></div>
      </div>

      <aside class="panel" aria-label="Cart">
        <h3>üß∫ Sepetim</h3>
        <div id="cartEmpty" style="color:var(--muted);font-size:13px;line-height:1.5;">
          Sepetiniz bo≈ü. √úr√ºn eklemek i√ßin ‚ÄúSepete Ekle‚Äù butonunu kullanƒ±n.
        </div>

        <div id="cartList" style="display:none;"></div>

        <div class="line"></div>

        <div class="sumRow">
          <span>Ara Toplam</span>
          <b id="subtotal">0‚Ç∫</b>
        </div>
        <div class="sumRow">
          <span>Kargo</span>
          <b id="shipping">0‚Ç∫</b>
        </div>
        <div class="sumRow">
          <span>Toplam</span>
          <b id="total">0‚Ç∫</b>
        </div>

        <button class="checkout" type="button">‚úÖ √ñdemeye Ge√ß</button>
        <div class="smallNote" id="destek">
          Bu demo sayfasƒ± ≈üu an statiktir. Ger√ßek sipari≈ü/√∂deme entegrasyonu daha sonra eklenecektir.
        </div>
      </aside>
    </section>

    <div class="footer">
      <div>¬© <span id="year"></span> OmniStore</div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;">
        <span class="pill">G√ºvenli √ñdeme</span>
        <span class="pill">Hƒ±zlƒ± Teslimat</span>
        <span class="pill">Kolay ƒ∞ade</span>
      </div>
    </div>

  </div>

  <script>
    const PRODUCTS = [
      { id: "p1", cat: "tech", name: "Wireless Kulaklƒ±k Pro", desc: "Aktif g√ºr√ºlt√º engelleme ‚Ä¢ 30 saat pil ‚Ä¢ Type-C", price: 1499, old: 1899, rating: 4.7, badge: "%20 ƒ∞ndirim" },
      { id: "p2", cat: "tech", name: "Akƒ±llƒ± Saat X", desc: "Saƒülƒ±k takibi ‚Ä¢ GPS ‚Ä¢ Suya dayanƒ±klƒ±", price: 2199, old: 2499, rating: 4.6, badge: "Yeni" },
      { id: "p3", cat: "home", name: "Aroma Kahve Makinesi", desc: "Programlanabilir ‚Ä¢ Otomatik kapanma ‚Ä¢ 1.5L", price: 1799, old: 0, rating: 4.8, badge: "Pop√ºler" },
      { id: "p4", cat: "home", name: "Akƒ±llƒ± LED ≈ûerit", desc: "Uygulama kontrol√º ‚Ä¢ RGB ‚Ä¢ 5m", price: 399, old: 499, rating: 4.5, badge: "Fƒ±rsat" },
      { id: "p5", cat: "fashion", name: "Minimal Sneaker", desc: "G√ºnl√ºk kullanƒ±m ‚Ä¢ Hafif taban ‚Ä¢ Unisex", price: 1299, old: 1599, rating: 4.4, badge: "%15" },
      { id: "p6", cat: "fashion", name: "≈ûehir √áantasƒ±", desc: "Laptop b√∂lmesi ‚Ä¢ Su itici ‚Ä¢ 20L", price: 999, old: 1199, rating: 4.6, badge: "Bestseller" },
      { id: "p7", cat: "tech", name: "Mekanik Klavye 75%", desc: "Hot-swap ‚Ä¢ RGB ‚Ä¢ Sessiz switch", price: 1899, old: 0, rating: 4.7, badge: "Pro" },
      { id: "p8", cat: "home", name: "Air Fryer 4.5L", desc: "Az yaƒü ‚Ä¢ Dijital panel ‚Ä¢ Kolay temizlik", price: 2399, old: 2699, rating: 4.8, badge: "Hƒ±zlƒ± Kargo" },
    ];

    const fmt = (n) => new Intl.NumberFormat("tr-TR").format(n) + "‚Ç∫";

    const state = {
      q: "",
      cat: "all",
      cart: new Map(), // id -> qty
    };

    const $products = document.getElementById("products");
    const $count = document.getElementById("count");
    const $q = document.getElementById("q");
    const $cat = document.getElementById("cat");

    const $cartEmpty = document.getElementById("cartEmpty");
    const $cartList = document.getElementById("cartList");
    const $subtotal = document.getElementById("subtotal");
    const $shipping = document.getElementById("shipping");
    const $total = document.getElementById("total");

    function filteredProducts(){
      const q = state.q.trim().toLowerCase();
      return PRODUCTS.filter(p => {
        const matchesCat = state.cat === "all" ? true : p.cat === state.cat;
        const matchesQ = q ? (p.name.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q)) : true;
        return matchesCat && matchesQ;
      });
    }

    function renderProducts(){
      const list = filteredProducts();
      $count.textContent = `${list.length} √ºr√ºn`;

      $products.innerHTML = list.map(p => `
        <div class="product">
          <div class="thumb" aria-hidden="true">
            <div class="badgeCorner">${p.badge}</div>
          </div>

          <div class="pname">${p.name}</div>
          <div class="pdesc">${p.desc}</div>

          <div class="row">
            <div class="price">
              ${fmt(p.price)}
              ${p.old ? `<span class="old">${fmt(p.old)}</span>` : ``}
            </div>

            <div class="rating" title="Puan">
              <span class="stars">‚òÖ</span> ${p.rating.toFixed(1)}
            </div>
          </div>

          <button class="add" data-add="${p.id}" type="button">üõí Sepete Ekle</button>
        </div>
      `).join("");

      // bind
      $products.querySelectorAll("[data-add]").forEach(btn => {
        btn.addEventListener("click", () => addToCart(btn.getAttribute("data-add")));
      });
    }

    function addToCart(id){
      const cur = state.cart.get(id) || 0;
      state.cart.set(id, cur + 1);
      renderCart();
    }

    function changeQty(id, delta){
      const cur = state.cart.get(id) || 0;
      const next = cur + delta;
      if(next <= 0) state.cart.delete(id);
      else state.cart.set(id, next);
      renderCart();
    }

    function calc(){
      let subtotal = 0;
      for(const [id, qty] of state.cart.entries()){
        const p = PRODUCTS.find(x => x.id === id);
        subtotal += (p.price * qty);
      }
      // simple shipping rule
      const shipping = subtotal === 0 ? 0 : (subtotal >= 1000 ? 0 : 79);
      const total = subtotal + shipping;
      return { subtotal, shipping, total };
    }

    function renderCart(){
      const { subtotal, shipping, total } = calc();

      $subtotal.textContent = fmt(subtotal);
      $shipping.textContent = fmt(shipping);
      $total.textContent = fmt(total);

      if(state.cart.size === 0){
        $cartEmpty.style.display = "block";
        $cartList.style.display = "none";
        $cartList.innerHTML = "";
        return;
      }

      $cartEmpty.style.display = "none";
      $cartList.style.display = "block";

      $cartList.innerHTML = Array.from(state.cart.entries()).map(([id, qty]) => {
        const p = PRODUCTS.find(x => x.id === id);
        return `
          <div class="cartItem">
            <div class="miniThumb" aria-hidden="true"></div>
            <div class="ciMain">
              <b title="${p.name}">${p.name}</b>
              <span>${fmt(p.price)} ‚Ä¢ ${qty} adet</span>
            </div>
            <div class="qty">
              <button type="button" data-dec="${id}">‚àí</button>
              <span style="min-width:18px;text-align:center">${qty}</span>
              <button type="button" data-inc="${id}">+</button>
            </div>
          </div>
        `;
      }).join("");

      $cartList.querySelectorAll("[data-dec]").forEach(b => b.addEventListener("click", () => changeQty(b.getAttribute("data-dec"), -1)));
      $cartList.querySelectorAll("[data-inc]").forEach(b => b.addEventListener("click", () => changeQty(b.getAttribute("data-inc"), +1)));
    }

    function setCategory(cat){
      state.cat = cat;
      $cat.value = cat;
      document.querySelectorAll(".chip").forEach(ch => ch.classList.toggle("active", ch.dataset.chip === cat));
      renderProducts();
    }

    // Events
    $q.addEventListener("input", (e) => {
      state.q = e.target.value;
      renderProducts();
    });

    $cat.addEventListener("change", (e) => setCategory(e.target.value));

    document.querySelectorAll(".chip").forEach(ch => {
      ch.addEventListener("click", () => setCategory(ch.dataset.chip));
    });

    // Init
    document.getElementById("year").textContent = new Date().getFullYear();
    renderProducts();
    renderCart();
  </script>
</body>
</html>
